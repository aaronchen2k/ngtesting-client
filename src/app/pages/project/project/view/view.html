<div class="project-view">

  <div class="content">
    <div class="row">
      <div class="list-toolbar col-xl-12">
        <div class="title">
          <span>{{project.name}}</span>
        </div>

        <div class="filter">

        </div>

        <div class="buttons">
          <button [routerLink]="['/pages/org/' + orgId + '/prjs']" type="button"
                  class="btn btn-secondary btn-with-icon btn-sm">
            <i class="fa fa-plus-circle"></i>返回
          </button>
        </div>
      </div>
    </div>

    <div class="row chart">
      <div class="col-sm-6">
        <design-progress [data]="chartData.design" [showTitle]="true"></design-progress>
      </div>
      <div class="col-sm-6">
        <execution-process [data]="chartData.exe" [showTitle]="true"></execution-process>
      </div>
    </div>
  </div>

  <div class="info">

    <div class="activity">
      <div class="title">
        测试计划
      </div>
      <div class="list">
        <table class="table">
          <thead>
          <tr>
            <th>名称</th>
            <th>时间</th>
            <th>状态</th>
            <th>操作</th>
          </tr>
          </thead>

          <tbody>
          <tr *ngFor="let plan of plans">
            <td>{{plan.name}}</td>
            <td>
              {{plan.startTime | date:'MM/dd'}} - {{plan.endTime | date:'MM/dd'}}
            </td>
            <td>{{plan.status | exeStatus}}</td>
            <td>
                  <span prj-privilege [privs]="'test_plan-view'"
                        [routerLink]="['/pages/org/' + orgId + '/prj/' + id + '/implement/plan/' + plan.id + '/view']" class="link no-underline">查看</span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="activity">
      <div class="title">
        项目活动
      </div>
      <div class="list">
        <div *ngFor="let item of (histories | mapToArray); let i = index;" class="item">
          <div class="date">
            {{item.key}}
          </div>
          <div class="descr">
            <div class="action-html descr-item" *ngFor="let his of item.value; let j = index;">
              <div [innerHTML]="his.title" class="content"></div>&nbsp;&nbsp;
              <div class="date">{{his.createTime | date:'HH:mm:ss'}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
